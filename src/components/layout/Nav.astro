---
import { NAV_ITEMS } from "../../data/navigation";
import DropdownCategories from "./DropdownCategories.astro";

interface Props {
  categories: ReadonlyArray<{ label: string; slug: string }>;
}

const { categories } = Astro.props;
const pathname = Astro.url.pathname;
const isHome = pathname === "/";
---

<nav class="hidden items-center gap-8 text-gray-900 lg:flex transition-colors">
  {NAV_ITEMS.map((item) => {
    if (item.type === "dropdown") {
      return <DropdownCategories categories={categories} />;
    }

    const href =
      item.type === "anchor" && isHome ? item.href.replace("/", "") : item.href;

    const isExternal = href.startsWith("http");

    return (
      <a
        href={href}
        target={isExternal ? "_blank" : undefined}
        rel={isExternal ? "noopener noreferrer" : undefined}
        class="text-[18px] tracking-wide hover:opacity-70 uppercase transition-opacity"
      >
        {item.label}
      </a>
    );
  })}
</nav>